<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–ó–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</title>
    <link rel="stylesheet" th:href="@{/css/navbar.css}">
    <link rel="stylesheet" th:href="@{/css/orders.css}">
    <link rel="icon" href="/icon/favicon.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<header>
    <div th:replace="~{/navbar}">Navbar</div>
</header>
<body>
<main>
    <div class="pages" th:if="${model.base().totalPages() > 1}">
        <ul class="pages-ul">
            <li
                    th:each="pageNumber : ${#numbers.sequence(1, model.base().totalPages())}"
                    th:classappend="${pageNumber == form.pages.page()} ? 'active'">
                <a class="page-picker"
                   th:href="@{/orders(
                         pages.page=${pageNumber},
                         pages.size=${form.pages.size()},
                         pages.substring=${form.pages.substring()}
                     )}"
                   th:text="${pageNumber}">1</a>
            </li>
        </ul>
    </div>

    <div class="products" th:if="${#lists.isEmpty(model.purchases())}">
        –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–∫–∞ —á—Ç–æ –Ω–µ —Å–¥–µ–ª–∞–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ üôÅ
    </div>

    <div class="cards" th:if="${not #lists.isEmpty(model.purchases())}">
        <div class="card" th:each="purchase : ${model.purchases()}">
            <h2 th:text="'–°—Ç–∞—Ç—É—Å: ' + ${purchase.status()}">–°—Ç–∞—Ç—É—Å</h2>
            <h2 th:text="'–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: ' + ${purchase.number()}">–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞</h2>
            <h4 th:text="'–ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞: ' + ${purchase.totalPrice()}">–ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞</h4>
            <h4 th:text="'–ü–æ–ª—É—á–µ–Ω–Ω–æ –±–∞–ª–ª–æ–≤: ' + ${purchase.cashback()}">–ü–æ–ª—É—á–µ–Ω–æ –±–∞–ª–ª–æ–≤</h4>
            <h4 th:text="'–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞: ' + ${#temporals.format(purchase.date(), 'HH:mm dd-MM')}">–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞</h4>
            <a th:if="${purchase.status() != 'DELIVERED' && purchase.status() != 'CANCELED'}"
               th:href="@{/orders/admin/check(purchaseNumber=${purchase.number()})}">–û—Ç–º–µ—Ç–∏—Ç—å</a>
            <a class="delete-button" th:if="${purchase.status() != 'CANCELED'}"
               onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–∫—É–ø–∫—É?');"
               th:href="@{/orders/admin/cancel-purchase(purchaseNumber=${purchase.number()})}">–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–∫—É–ø–∫—É</a>
        </div>
    </div>
</main>
</body>
</html>